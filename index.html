<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> RELOJ Y RULETA</title>
    <meta name="author" content = "Pol, Nacho y Carlos">
    <meta name="description" content = "M04 UF3 A1 PT1 Eines Aula">
    <meta name="dateCreated" content = "05/05/2023">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="estilo.css">
    <nav>
        <div class="tema">
            <button  id="tema" onclick="cambiarTema()">Cambiar de Tema</button>
        </div>
    </nav>
</head>
<body>
    <section id="seccion-hora">
        <div id="box_alarma">
            <div id="tiempo">00:00:00</div>
            <br>
            <br>
            <h3>Establecer Alarma</h3>

            <select name="" id="alarmaHrs"></select>
            <select name="" id="alarmaMin"></select>
            <select name="" id="alarmaSeg"></select>
            <br>
            <br>
            <div id="eleccion_alarma">
                <label for="">Elige un Sonido:</label>
                <br>
                <select name="" id="sonidos">
                    <option value ="campanas"> Campanas</option>
                    <option value ="coches"> Coches</option>
                    <option value ="gritos"> gritos</option>
                </select>
            </div>
            <button type="button" id="botonEstablecerAlarma" onclick="EstablecerAlarma()">Establecer Alarma</button>
            <button id="botonReiniciarAlarma" onclick="limpiarAlarma()">Reiniciar Alarma</button>
        </div>
        <script src="ajustes.js"></script>
    </section>
    <section id="seccion-ruleta">
        <header><h1>RULETA</h1></header>
        <div class="contenedor">
            <h1>Alumnos</h1>
            <audio id="audio" src="./musicas/sonido_ruleta.mp3"></audio>
            <div class="Alumnos">
                <canvas id="idcanvas" width="600" height="600"></canvas>
                <br>
                <button onclick="Girar()"><span id="idestado">Girar</span></button>
                <div class="mark-winner"></div>
            </div>
        </div>
        <script type="text/javascript">
            const array_alumnos=
            [
                'Dani' ,'Pol','Nacho','Leo','Sofía', 'Mateo', 'Valentina', 'Daniel', 'Isabella', 'Santiago', 'Victoria', 'Carlos', 'Catalina', 'Juan', 'Mariana', 'Alejandro', 'Ana', 'Andrés', 'Camila', 'Esteban', 'Laura', 'Felipe', 'Natalia'
            ];
    
            let sonido = document.getElementById("audio");
            let canvas=document.getElementById("idcanvas");
            let context=canvas.getContext("2d");
            let center=canvas.width/2;
    
            context.beginPath();
            context.moveTo(center,center);
            context.arc(center,center,center,0, 2*Math.PI);
            context.lineTo(center,center);
            context.fillStyle ='#33333333';
            context.fill();
    
            context.beginPath();
            context.moveTo(center,center);
            context.arc(center,center,center-10,0, 2*Math.PI);
            context.lineTo(center,center);
            context.fillStyle ='black';
            context.fill();
    
            for (var i = 0; i < array_alumnos.length; i++) {
                context.beginPath();
                context.moveTo(center,center);
                context.arc(center,center,center-20,i*2*Math.PI/array_alumnos.length, (i+1)*2*Math.PI/array_alumnos.length);
                context.lineTo(center,center);
                context.fillStyle =random_color();
                context.fill();
    
                context.save();
                context.translate(center, center);
                context.rotate(3*2*Math.PI/(5*array_alumnos.length)+i*2*Math.PI/array_alumnos.length);
                context.translate(-center, -center);
                context.font = "13px Comic Sans MS";
                context.textAlign = "right";
                context.fillStyle = "white";
                context.fillText(array_alumnos[i], canvas.width-30, center);
                context.restore();
            }
    
            let pos_ini = 0;
            let clic = 0;
            let movement;
            let timer;
    
            function Girar() {
                  if (clic == 0) {
                sonido.play();
                let canvas = document.getElementById("idcanvas");
                   movement = setInterval(function() {
                      pos_ini += 10;
                      canvas.style.transform = 'rotate(' + pos_ini + 'deg)';
                }, 10);
                timer = setTimeout(function() {
                      clearInterval(movement);
                      clic = 0;
                      document.getElementById("idestado").innerHTML = "Girar";
                      sonido.pause();
                }, 5000);
                   clic = 1;
                document.getElementById("idestado").innerHTML = "Detener";
              } else {
                clearTimeout(timer);
                clearInterval(movement);
                clic = 0;
                document.getElementById("idestado").innerHTML = "Girar";
                sonido.pause();
              }
        }
            function random_color(){
                let ar_digit=['2','3','4','5','6','7','8','9'];
                let color='';
                let i=0;
                while(i<6){
                    let pos=Math.round(Math.random()*(ar_digit.length-1));
                    color=color+''+ar_digit[pos];
                    i++;
                }
                return '#'+color;
            }
        </script>
    </section>
    <section id="seccion-temporizador">
        <h1>Contador</h1>
        <audio id="portaaviones" src="/musicas/portaaviones.mp3"></audio>
        <audio id="mario" src="/mario.mp3"></audio>
        <audio id="dios" src="/musicas/dios.mp3"></audio>
        <audio id="rumble" src="/rumble.mp3"></audio>
        <div id="container">
            <p id="hour-label" class="label">Hours</p><p id="min-label" class="label">Minutes</p><p id="sec-label" class="label">Seconds</p>
            <input id="hour" type="number" max="99" min="0" value="0" class="time"><p id="p1" class="semicolon">:</p><input id="minute" type="number" max="60" min="0" value="0" class="time"><p id="p2" class="semicolon">:</p><input id="sec" type="number" max="60" min="0" value="0" class="time">
            <label for=""></label>
                    <select name="" id="sonidos">
                        <option value ="portaaviones"> Portaaviones</option>
                        <option value ="mario"> Mario</option>
                        <option value ="dios"> Dios</option>
                        <option value ="rumble"> Rumble</option>
                    </select>
            <button id="start" class="btn">Start</button>
            <button id="reset" class="btn">Reset</button>
        </div>
        <script src="timer.js"></script>
    </section>
</body>
</html>